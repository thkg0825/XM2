<script src="~/lib/vue/dist/vue.global.js"></script>
<link href="~/lib/element-plus/dist/index.css" rel="stylesheet" />
<script src="~/lib/element-plus/dist/index.full.js"></script>
<script src="~/lib/axios/dist/axios.js"></script>
<body>
    <div id="app">
        <el-text class="mx-1" type="info">您正在做的业务是：招聘管理-->面试管理-->面试结果登记</el-text>
        <el-button type="success" v-on:click="dj()" style="margin-left:1200px">登记</el-button>

        <el-form ref="ZWFBDJ" class="ZWFBDJ" :model="fAdd" style="border: 1px solid black; width:1287px;height:609px">

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;职位分类：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_major_kind_name" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;职位名称：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_major_name" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;招聘类型：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.engage_type" readonly></el-input>
            </div>

            <br />

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;姓名：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_name" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;性别：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_sex" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EMAIL：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_email" readonly></el-input>
            </div>

            <br />

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;电话：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_telephone" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;家庭电话：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_homephone" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;手机：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_mobilephone" readonly></el-input>
            </div>

            <br />

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;住址：
            </div>
            <div>
                <el-input class="zj" v-model="fAdd.human_address" style="width:483px;height:18px;" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;邮编：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_postcode" readonly></el-input>
            </div>

            <br />

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;国籍：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_nationality" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出生地：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_birthplace" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;生日：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_birthday" readonly></el-input>
            </div>

            <br />

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;民族：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_race" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;宗教信仰：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_religion" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;政治面貌：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_party" readonly></el-input>
            </div>

            <br />

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;身份证号码：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_idcard" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;年龄：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_age" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;毕业院校：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_college" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;学历：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_educated_degree" readonly></el-input>
            </div>

            <br />

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;教育年限：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_educated_years" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;专业：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_educated_major" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;薪酬要求：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.demand_salary_standard" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注册时间：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.regist_time" readonly></el-input>
            </div>

            <br />

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;特长：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_specility" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;爱好：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.human_hobby" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;推荐人：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.checker" readonly></el-input>
            </div>

            <div class="tt">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;推荐时间：
            </div>
            <div class="zj">
                <el-input class="zj" v-model="fAdd.check_time" readonly></el-input>
            </div>

            <div class="yq">
                <el-form-item class="gg" label="个人履历："></el-form-item>
            </div>
            <div class="qp">
                <el-input v-model="fAdd.human_history_records" :rows="3" type="textarea" readonly></el-input>
            </div>

            <div class="yq">
                <el-form-item class="gg" label="备注："></el-form-item>
            </div>
            <div class="qp">
                <el-input v-model="fAdd.remark" :rows="3" type="textarea" readonly></el-input>
            </div>

            <div class="yq">
                <el-form-item class="gg" label="推荐意见："></el-form-item>
            </div>
            <div class="qp">
                <el-input v-model="fAdd.recomandation" :rows="3" type="textarea" readonly></el-input>
            </div>

            <div class="vv">
				<el-form-item class="vb" label="面试次数："></el-form-item>
            </div>
            <div class="ez">
                <el-input class="ez" v-model="fff.interview_amount" readonly></el-input>
            </div>

            <div class="vv">
				<el-form-item class="vb" label="形象评价："></el-form-item>
            </div>
            <div class="ez">
                <el-select v-model="fff.image_degree"
                           placeholder="--请选择--"
                           size="large"
                           class="ez"
                           style="height:18px">
                    <el-option v-for="item in options1"
                               :key="item.pbc_id"
                               :label="item.attribute_name"
                               :value="item.attribute_name" />
                </el-select>
            </div>

            <div class="vv">
				<el-form-item class="vb" label="口才评价："></el-form-item>
            </div>
            <div class="ez">
                <el-select v-model="fff.native_language_degree"
                           placeholder="--请选择--"
                           size="large"
                           class="ez"
                           style="height:18px">
                    <el-option v-for="item in options2"
                               :key="item.pbc_id"
                               :label="item.attribute_name"
                               :value="item.attribute_name" />
                </el-select>
            </div>

            <div class="vv">
				<el-form-item class="vb" label="对外口语能力："></el-form-item>
            </div>
            <div class="ez">
                <el-select v-model="fff.foreign_language_degree"
                           placeholder="--请选择--"
                           size="large"
                           class="ez"
                           style="height:18px">
                    <el-option v-for="item in options3"
                               :key="item.pbc_id"
                               :label="item.attribute_name"
                               :value="item.attribute_name" />
                </el-select>
            </div>

            <br />

            <div class="vv">
				<el-form-item class="vb" label="应变能力："></el-form-item>
            </div>
            <div class="ez">
                <el-select v-model="fff.response_speed_degree"
                           placeholder="--请选择--"
                           size="large"
                           class="ez"
                           style="height:18px"> 
                    <el-option v-for="item in options4"
                               :key="item.pbc_id"
                               :label="item.attribute_name"
                               :value="item.attribute_name" />
                </el-select>
            </div>

            <div class="vv">
				<el-form-item class="vb" label="EQ："></el-form-item>
            </div>
            <div class="ez">
                <el-select v-model="fff.EQ_degree"
                           placeholder="--请选择--"
                           size="large"
                           class="ez">
                    <el-option v-for="item in options5"
                               :key="item.pbc_id"
                               :label="item.attribute_name"
                               :value="item.attribute_name" />
                </el-select>
            </div>

            <div class="vv">
				<el-form-item class="vb" label="IQ："></el-form-item>
            </div>
            <div class="ez">
                <el-select v-model="fff.IQ_degree"
                           placeholder="--请选择--"
                           size="large"
                           class="ez"
                           style="height:18px">
                    <el-option v-for="item in options6"
                               :key="item.pbc_id"
                               :label="item.attribute_name"
                               :value="item.attribute_name" />
                </el-select>
            </div>

            <div class="vv">
				<el-form-item class="vb" label="综合素质："></el-form-item>
            </div>
            <div class="ez">
                <el-select v-model="fff.multi_quality_degree"
                           placeholder="--请选择--"
                           size="large"
                           class="ez"
                           style="height:18px">
                    <el-option v-for="item in options7"
                               :key="item.pbc_id"
                               :label="item.attribute_name"
                               :value="item.attribute_name" />
                </el-select>
            </div>

            <br />

            <div class="vv">
				<el-form-item class="vb" label="面试人："></el-form-item>
            </div>
            <div class="ez">
                <el-input class="ez" v-model="zsname" readonly></el-input>
            </div>

            <div class="vv">
				<el-form-item class="vb" label="面试时间："></el-form-item>
            </div>
            <div class="ez">
                <el-date-picker class="ez" v-model="rq" type="date" placeholder="请选择日期" size="large" style="width: 180px"/>
            </div>

            <div class="vv">
            </div>
            <div class="ez">
            </div>

            <div class="vv">
            </div>
            <div class="ez">
            </div>

            <br />


            <div class="yq">
                <el-form-item class="gg" label="面试评价："></el-form-item>
            </div>
            <div class="qp">
                <el-input v-model="fff.interview_comment" :rows="3" type="textarea" ></el-input>
            </div>

        </el-form>


    </div>
</body>
<script type="text/javascript">
    const { createApp, ref, reactive, computed, watchEffect, onMounted, onUnmounted } = Vue;
    var app = createApp({
        setup() {

            var fff = reactive({
                ein_id: '',
                human_name: '',
                interview_amount: '1',
                human_major_kind_id: '',
                human_major_kind_name: '',
                human_major_id: '',
                human_major_name: '',
                image_degree: '',
                native_language_degree: '',
                foreign_language_degree: '',
                response_speed_degree: '',
                EQ_degree: '',
                IQ_degree: '',
                multi_quality_degree: '',
                register: '',
                checker: '',
                registe_time: '',
                check_time: '',
                resume_id: '',
                result: '',
                interview_comment: '',
                check_comment: '',
                interview_status: '',
                check_status: '',
            })
                

            var fAdd = reactive({
                res_id: '',
                human_name: '',
                engage_type: '',
                human_address: '',
                human_postcode: '',
                human_major_kind_id: '',
                human_major_kind_name: '',
                human_major_id: '',
                human_major_name: '',
                human_telephone: '',
                human_homephone: '',
                human_mobilephone: '',
                human_email: '',
                human_hobby: '',
                human_specility: '',
                human_sex: '',
                human_religion: '',
                human_party: '',
                human_nationality: '',
                human_race: '',
                human_birthday: '',
                human_age: '',
                human_educated_degree: '',
                human_educated_years: '',
                human_educated_major: '',
                human_college: '',
                human_idcard: '',
                human_birthplace: '',

                demand_salary_standard: '',
                human_history_records: '',
                remark: '',
                recomandation: '',
                human_picture: '',
                attachment_name: '',
                check_status: '',
                register: '',
                regist_time: '',
                checker: '',
                check_time: '',
                interview_status: '',
                total_points: '',
                test_amount: '',
                test_checker: '',
                test_check_time: '',
                pass_register: '',
                pass_regist_time: '',
                pass_checker: '',
                pass_check_time: '',
                pass_check_status: '',
                pass_checkComment: '',
                pass_passComment: '',
            })

            const fetchData = () => {
                const responseDataString = sessionStorage.getItem('MS');
                if (responseDataString) {
                    const responseDataArray = JSON.parse(responseDataString);
                    fAdd = responseDataArray
                } else {
                    console.log("未找到存储的值");
                }
            };
            fetchData();

            const zsname = ref("");
            const fename = () => {
                const responseDataString = sessionStorage.getItem('User');
                if (responseDataString) {
                    const responseDataArray = JSON.parse(responseDataString);
                    zsname.value = responseDataArray.uTrueName
                } else {
                    console.log("未找到存储的值");
                }
            };
            fename();

            const rq = ref(null);

            function x() {
                const year = rq.value.getFullYear();
                const month = String(rq.value.getMonth() + 1).padStart(2, '0');
                const day = String(rq.value.getDate()).padStart(2, '0');
                const sj = `${year}-${month}-${day} 00:00:00`;
                fff.register = zsname.value
                fff.registe_time = sj
                fff.human_name = fAdd.human_name
                fff.human_major_kind_id = fAdd.human_major_kind_id
                fff.human_major_kind_name = fAdd.human_major_kind_name
                fff.human_major_id = fAdd.human_major_id
                fff.human_major_name = fAdd.human_major_name
                fff.resume_id = fAdd.res_id
            }

            const options1 = ref();
            const options2 = ref();
            const options3 = ref();
            const options4 = ref();
            const options5 = ref();
            const options6 = ref();
            const options7 = ref();

            //形象评价下拉框
            axios.get('/CPC/SeleteGGSX', {
                params: {
                    x: '评价等级'
                }
            }).then(res => {
                options1.value = res.data
            })
            
            //口才评价下拉框
            axios.get('/CPC/SeleteGGSX', {
                params: {
                    x: '评价等级'
                }
            }).then(res => {
                options2.value = res.data
            })
            
            //对外语言能力评价下拉框
            axios.get('/CPC/SeleteGGSX', {
                params: {
                    x: '评价等级'
                }
            }).then(res => {
                options3.value = res.data
            })
            
            //应变能力评价下拉框
            axios.get('/CPC/SeleteGGSX', {
                params: {
                    x: '评价等级'
                }
            }).then(res => {
                options4.value = res.data
            })
            
            //EQ评价下拉框
            axios.get('/CPC/SeleteGGSX', {
                params: {
                    x: '评价等级'
                }
            }).then(res => {
                options5.value = res.data
            })
            
            //IQ评价下拉框
            axios.get('/CPC/SeleteGGSX', {
                params: {
                    x: '评价等级'
                }
            }).then(res => {
                options6.value = res.data
            })
            
            //综合素质评价下拉框
            axios.get('/CPC/SeleteGGSX', {
                params: {
                    x: '评价等级'
                }
            }).then(res => {
                options7.value = res.data
            })
            
            function dj() {
                x()
                console.log(fAdd)
                console.log(fff)

                if (confirm("请确定数据填写完全")) {

                    axios.defaults.headers["Content-Type"] = "application/x-www-form-urlencoded";
                    axios.put('/ER/UpdEMR', {
                        res_id: fAdd.res_id,
                        human_name: fAdd.human_name,
                        engage_type: fAdd.engage_type,
                        human_address: fAdd.human_address,
                        human_postcode: fAdd.human_postcode,
                        human_major_kind_id: fAdd.human_major_kind_id,
                        human_major_kind_name: fAdd.human_major_kind_name,
                        human_major_id: fAdd.human_major_id,
                        human_major_name: fAdd.human_major_name,
                        human_telephone: fAdd.human_telephone,
                        human_homephone: fAdd.human_homephone,
                        human_mobilephone: fAdd.human_mobilephone,
                        human_email: fAdd.human_email,
                        human_hobby: fAdd.human_hobby,
                        human_specility: fAdd.human_specility,
                        human_sex: fAdd.human_sex,
                        human_religion: fAdd.human_religion,
                        human_party: fAdd.human_party,
                        human_nationality: fAdd.human_nationality,
                        human_race: fAdd.human_race,
                        human_birthday: fAdd.human_birthday,
                        human_age: fAdd.human_age,
                        human_educated_degree: fAdd.human_educated_degree,
                        human_educated_years: fAdd.human_educated_years,
                        human_educated_major: fAdd.human_educated_major,
                        human_college: fAdd.human_college,
                        human_idcard: fAdd.human_idcard,
                        human_birthplace: fAdd.human_birthplace,
                        demand_salary_standard: fAdd.demand_salary_standard,
                        human_history_records: fAdd.human_history_records,
                        remark: fAdd.remark,
                        register: fAdd.register,
                        regist_time: fAdd.regist_time,
                        recomandation: fAdd.recomandation,
                        checker: fAdd.checker,
                        check_time: fAdd.check_time,
                        interview_status: 2,
                    }).then(res => {
                        console.log(res)
                    }).catch(err => {
                        console.log(err)
                    })

                    axios.defaults.headers["Content-Type"] = "application/x-www-form-urlencoded";
                    axios.put('/EI/AddEI', {
                        human_name: fff.human_name,
                        interview_amount: fff.interview_amount,
                        human_major_kind_id: fff.human_major_kind_id,
                        human_major_kind_name: fff.human_major_kind_name,
                        human_major_id: fff.human_major_id,
                        human_major_name: fff.human_major_name,
                        image_degree: fff.image_degree,
                        native_language_degree: fff.native_language_degree,
                        foreign_language_degree: fff.foreign_language_degree,
                        response_speed_degree: fff.response_speed_degree,
                        EQ_degree: fff.EQ_degree,
                        IQ_degree: fff.IQ_degree,
                        multi_quality_degree: fff.multi_quality_degree,
                        register: fff.register,
                        registe_time: fff.registe_time,
                        interview_comment: fff.interview_amount,
                        resume_id: fff.resume_id,
                        check_status: 0,
                        check_comment:'未'
                    }).then(res => {
                        console.log(res)
                        alert("登记成功")
                        window.location.href = '/ER/YXJLCX';
                    }).catch(err => {
                        console.log(err)
                        alert("登记失败")
                    })
                }

            }


            return {
                fAdd,
                fff,
                dj,
                zsname,
                rq,
                options1,
                options2,
                options3,
                options4,
                options5,
                options6,
                options7,
            }
        }
    })
    app.use(ElementPlus);
    app.mount("#app");
</script>

<style type="text/css">
    body {
        background-color: #FFFFBB;
        border: 1px solid #FFDB6F;
    }

    el-table {
        background-color: #FFFFBB;
    }

    .ZWFBDJ::after {
        display: table;
        clear: both;
    }

    .ZWFBDJ > div {
        border: 1px solid black;
        float: left;
    }

    .tt {
        height: 18px;
        width: 120px;
        background-color: #FFDB6F;
    }

    .zj {
        height: 18px;
        width: 180px;
    }

    .gg {
        margin-left: 28px;
        margin-top: 20px;
    }

    .yq {
        height: 73px;
        width: 120px;
        background-color: #FFDB6F;
    }

    .qp {
        width: 1163px;
        height: 73px;
    }

    .vv {
        height: 40px;
        width: 120px;
        background-color: #FFDB6F;
    }

    .vb {
        margin-left: 25px;
        margin-top: 5px;
    }

    .ez {
        height: 40px;
        width: 180px;
    }

</style>
